import { NextResponse } from 'next/server';
import { db } from '@/lib/db';
import { blogPosts } from '@/lib/db/schema';

interface BlogPostData {
  slug: string;
  title: string;
  excerpt: string;
  content: string;
  category: string;
  tags: string;
  isPublished: boolean;
  relatedProductIds: string[];
}

const blogPostsData: BlogPostData[] = [
  {
    slug: 'kak-vybrat-profnastil-dlya-zabora',
    title: 'Как выбрать профнастил для забора',
    excerpt: 'Разбираемся в марках профнастила и помогаем выбрать оптимальный вариант для вашего участка в Астрахани.',
    category: 'советы',
    tags: 'профнастил, забор, ограждение',
    isPublished: true,
    relatedProductIds: ['mp-20-korichnevyy', 's-8-morenyy-dub', 's-8-kamen', 'krovelnyy-samorez-korichnevyy', 'proftruba-60h60h2'],
    content: `# Как выбрать профнастил для забора

Забор из профнастила — практичное и долговечное решение для частного дома в Астрахани. Материал не боится жаркого климата, устойчив к ветрам и прослужит десятилетия без особого ухода.

## Какой профнастил есть в наличии

В магазине **Строй Дом** представлены две популярные марки профнастила:

### С-8 — экономичный вариант

Профлист с высотой волны 8 мм. Отлично подходит для заборов на дачных участках.

**Характеристики:**
- Толщина металла: 0,35 мм (стандартные цвета)
- Толщина металла: 0,4 мм (цвета «мореный дуб» и «каменный»)
- Рабочая ширина: 1,1 м

**Плюсы:** низкая цена, лёгкий вес, простой монтаж.

**Где использовать:** дачи, временные ограждения, невысокие заборы.

### МП-20 (С-20) — универсальный выбор

Высота волны 18-20 мм обеспечивает хорошую жёсткость.

**Характеристики:**
- Толщина металла: 0,35 мм
- Рабочая ширина: 1,1 м

**Плюсы:** прочность, устойчивость к ветру, долговечность.

**Где использовать:** частные дома, коттеджи, промышленные объекты.

## Какой профнастил выбрать?

| Задача | Рекомендуемая марка |
|--------|---------------------|
| Дачный забор | С-8 |
| Забор частного дома | МП-20 |
| Ограждение участка | МП-20 |
| Временное ограждение | С-8 |

## Цветовые решения

Особую популярность в Астрахани приобрели профлисты С-8 с декоративным покрытием:

- **Мореный дуб** — имитация натурального дерева (толщина 0,4 мм)
- **Каменный** — текстура под камень (толщина 0,4 мм)

Эти цвета выглядят эффектно и отлично вписываются в любой ландшафт.

## Расчёт материала

**Пример:** для забора длиной 50 метров понадобится:
50 / 1,1 = 46 листов (с запасом ~50 листов)

Расчёт одинаков для С-8 и МП-20, так как рабочая ширина у них одинаковая — 1,1 м.

## Советы по монтажу

- Используйте кровельные саморезы с резиновой шайбой
- Крепите в нижнюю волну
- Шаг между столбами — не более 2,5 метра
- Нахлёст листов — одна волна

---

В **Строй Дом** вы найдёте профнастил С-8 и МП-20 с доставкой по Астрахани и области. Поможем рассчитать количество и подобрать комплектующие!`
  },
  {
    slug: 'vidy-suhih-smesej-dlya-remonta',
    title: 'Виды сухих смесей для ремонта: что выбрать',
    excerpt: 'Обзор штукатурок, шпатлёвок и клеевых составов. Какую смесь использовать для разных задач.',
    category: 'советы',
    tags: 'сухие смеси, штукатурка, шпатлёвка, ремонт',
    isPublished: true,
    relatedProductIds: ['volma-start', 'volma-gips-aktiv', 'litoks-satenlux', 'ceresit-sm-11', 'peskobeton-profmix-m300'],
    content: `# Виды сухих смесей для ремонта

При ремонте квартиры или дома в Астрахани не обойтись без сухих строительных смесей. Разберёмся, какие виды существуют и для чего они нужны.

## Штукатурные смеси

### Гипсовая штукатурка

Идеальна для внутренних работ в сухих помещениях.

**Преимущества:**
- Быстро сохнет (3-7 дней)
- Легко наносится
- Не требует шпаклевания под обои
- Расход: 8-10 кг/м² при слое 10 мм

**Где применять:** спальни, гостиные, коридоры.

### Цементная штукатурка

Универсальный вариант для любых условий.

**Преимущества:**
- Высокая прочность
- Влагостойкость
- Подходит для фасадов
- Расход: 14-16 кг/м² при слое 10 мм

**Где применять:** ванные, кухни, фасады, подвалы.

## Шпатлёвки

### Стартовая (выравнивающая)

Для заделки неровностей до 10-15 мм. Крупнозернистая структура.

### Финишная

Для идеально гладкой поверхности под покраску. Наносится слоем 1-3 мм.

### Универсальная

Сочетает свойства стартовой и финишной. Удобно для небольших объёмов работ.

## Клеевые смеси

### Плиточный клей

- **Стандартный** — для керамической плитки внутри помещений
- **Усиленный** — для керамогранита и тёплых полов
- **Для наружных работ** — морозостойкий состав

### Клей для ГКЛ

Специальный состав для приклеивания гипсокартона к стенам без каркаса.

## Как выбрать смесь

| Задача | Рекомендуемая смесь |
|--------|---------------------|
| Выравнивание стен | Гипсовая штукатурка |
| Ванная комната | Цементная штукатурка |
| Подготовка под обои | Финишная шпатлёвка |
| Укладка плитки | Плиточный клей |

## Расчёт количества

**Штукатурка:** площадь × толщина слоя (см) × расход

**Пример:** комната 20 м², слой 2 см, гипсовая штукатурка
20 × 2 × 1 = 40 кг ≈ 2 мешка по 25 кг

---

В магазине **Строй Дом** в Астрахани представлены сухие смеси от ведущих производителей. Доставка по городу и области!`
  },
  {
    slug: 'gipsokarton-vidy-i-primenenie',
    title: 'Гипсокартон: виды и применение',
    excerpt: 'Какой гипсокартон выбрать для потолка, стен и ванной комнаты. Обзор типов ГКЛ.',
    category: 'советы',
    tags: 'гипсокартон, ГКЛ, потолки, перегородки',
    isPublished: true,
    relatedProductIds: ['gipsokarton', 'gipsokarton-vlagostoykiy', 'profil-60h27', 'napravlyayuschiy-27h28', 'podves-pryamoy-dlya-gipsokartona'],
    content: `# Гипсокартон: виды и применение

Гипсокартон — универсальный материал для создания перегородок, выравнивания стен и устройства подвесных потолков.

## Виды гипсокартона в «Строй Дом»

### ГКЛ — обычный (серый)

Стандартный гипсокартон для сухих помещений.

- Цвет картона: серый
- Применение: жилые комнаты, офисы, коридоры

### ГКЛВ — влагостойкий (зелёный)

Пропитан гидрофобизаторами для защиты от влаги.

- Цвет картона: зелёный
- Влагопоглощение: не более 10%
- Применение: ванные, кухни, санузлы

## Доступные толщины

В магазине **Строй Дом** представлен гипсокартон трёх толщин:

| Толщина | Применение |
|---------|------------|
| 9,5 мм | Потолки, криволинейные конструкции |
| 12,5 мм | Стены, перегородки |
| 15 мм | Усиленные конструкции, высокие нагрузки |

**Самый популярный размер:** 2500×1200×12,5 мм

## Какую толщину выбрать?

- **9,5 мм** — для подвесных потолков. Легче, проще монтировать на высоте.
- **12,5 мм** — для стен и перегородок. Оптимальное соотношение прочности и веса.
- **15 мм** — для особо прочных конструкций, где планируется крепить тяжёлые предметы.

## Профили для гипсокартона

### Направляющие (ПН/UW)

Крепятся к полу и потолку, служат направляющими для стоек.

### Стоечные (ПС/CW)

Вертикальные элементы каркаса, вставляются в направляющие.

### Потолочные (ПП/CD)

Для устройства подвесных потолков. Размер: 60×27 мм.

## Расчёт материалов

**На 1 м² перегородки (обшивка с двух сторон):**
- ГКЛ: 2,1 листа
- Профиль ПС: 2 пог. м
- Профиль ПН: 0,7 пог. м
- Саморезы: 50 шт
- Дюбели: 10 шт

## Советы по монтажу

- Оставляйте зазор 10 мм у пола и потолка
- Смещайте стыки листов в рядах
- Шаг саморезов: 15-20 см
- Утапливайте шляпки на 1 мм
- Укладывайте утеплитель в перегородки для звукоизоляции

---

В **Строй Дом** в Астрахани — гипсокартон ГКЛ и ГКЛВ всех толщин, профили и комплектующие. Доставка по городу!`
  },
  {
    slug: 'utepliteli-dlya-doma-sravnenie',
    title: 'Утеплители для дома: сравнение материалов',
    excerpt: 'Сравниваем пенопласт, пенополистирол, каменную и минеральную вату. Какой утеплитель лучше для стен и крыши.',
    category: 'советы',
    tags: 'утепление, пенопласт, минвата, каменная вата, теплоизоляция',
    isPublished: true,
    relatedProductIds: ['isover-teplyy-dom-50mm', 'isover-teplyy-dom-100mm', 'penopleks-50', 'penoplast', 'izospan-b-paroizolyatsiya'],
    content: `# Утеплители для дома: сравнение материалов

Правильное утепление дома в астраханском климате помогает сохранить прохладу летом и тепло зимой, снижая расходы на кондиционирование и отопление.

## Виды утеплителей в «Строй Дом»

### Пенополистирол (ЭППС/XPS)

Экструдированный пенополистирол — один из самых эффективных утеплителей.

**Характеристики:**
- Теплопроводность: 0,028-0,034 Вт/(м·К)
- Плотность: 25-45 кг/м³
- Водопоглощение: менее 0,5%

**Плюсы:**
- Отличная теплоизоляция
- Не впитывает влагу
- Высокая прочность
- Срок службы 50+ лет

**Минусы:**
- Горючесть
- Не «дышит»

**Применение:** фундаменты, цоколи, полы.

### Пенопласт (ПСБ)

Доступный утеплитель для стен.

**Характеристики:**
- Теплопроводность: 0,036-0,043 Вт/(м·К)
- Плотность: 15-35 кг/м³

**Плюсы:**
- Низкая цена
- Лёгкий вес
- Простой монтаж

**Минусы:**
- Впитывает влагу
- Горючий

**Применение:** наружное утепление стен.

### Каменная вата

Производится из базальтовых пород. Отличный выбор для ответственных конструкций.

**Характеристики:**
- Теплопроводность: 0,035-0,042 Вт/(м·К)
- Группа горючести: НГ (негорючий)
- Плотность: 30-200 кг/м³

**Плюсы:**
- Не горит (выдерживает до 1000°C)
- Отличная звукоизоляция
- Паропроницаемость
- Долговечность 50+ лет

**Применение:** кровля, мансарды, фасады, каркасные стены.

### Минеральная вата

Более доступный вариант волокнистого утеплителя.

**Характеристики:**
- Теплопроводность: 0,038-0,045 Вт/(м·К)
- Группа горючести: НГ (негорючий)

**Плюсы:**
- Доступная цена
- Звукоизоляция
- Не горит

**Минусы:**
- Требует защиты от влаги
- Требует пароизоляции

**Применение:** перегородки, чердачные перекрытия, каркасные стены.

## Сравнительная таблица

| Параметр | ЭППС | Пенопласт | Каменная вата | Минвата |
|----------|------|-----------|---------------|---------|
| Теплопроводность | 0,030 | 0,040 | 0,038 | 0,042 |
| Горючесть | Г3 | Г3 | НГ | НГ |
| Влагостойкость | Да | Нет | Нет | Нет |
| Цена | Высокая | Низкая | Средняя | Низкая |

## Рекомендации по выбору

- **Фундамент/цоколь:** только ЭППС
- **Наружные стены:** пенопласт или каменная вата
- **Каркасные стены:** каменная или минеральная вата
- **Кровля/мансарда:** каменная вата

## Толщина утепления для Астрахани

Для климата Астраханской области:
- Стены: 50-100 мм
- Кровля: 100-150 мм
- Фундамент: 50 мм

---

Выбирайте утеплители в **Строй Дом** в Астрахани — каменная и минеральная вата, пенопласт, ЭППС с доставкой!`
  },
  {
    slug: 'krepezh-vidy-i-primenenie',
    title: 'Крепёж: виды и применение',
    excerpt: 'Обзор саморезов, дюбелей и гвоздей. Какой крепёж использовать для разных материалов.',
    category: 'советы',
    tags: 'крепёж, саморезы, дюбели, гвозди',
    isPublished: true,
    relatedProductIds: ['samorez-po-derevu', 'samorez-po-metallu', 'dyubel-gvozd', 'dyubel-babochka', 'gvozdi-shifernye', 'gvozdi-tolevye'],
    content: `# Крепёж: виды и применение

Правильный выбор крепежа — залог надёжной конструкции. Разберёмся, какие виды крепежа существуют и где их применять.

## Саморезы

### По дереву

- Крупный шаг резьбы
- Острый наконечник
- Чёрные или жёлтые

**Размеры:** 3,5×16 — 6×150 мм

**Применение:** дерево, ДСП, ОСП, МДФ.

### По металлу

- Мелкий шаг резьбы
- Наконечник-сверло для тонкого металла

**Применение:** профили, листовой металл.

### Для гипсокартона

- Рожковая головка
- Мелкий шаг — для металлического каркаса
- Крупный шаг — для деревянного каркаса

**Размеры:**
- 3,5×25 — один слой ГКЛ
- 3,5×35 — два слоя ГКЛ

### Кровельные

- Шестигранная головка
- Резиновая прокладка
- Наконечник-сверло

**Применение:** профнастил, металлочерепица.

## Дюбели

### Распорные (универсальные)

При закручивании самореза дюбель расширяется.

**Размеры и нагрузка:**
- 6×30 — до 5 кг
- 8×40 — до 15 кг
- 10×50 — до 30 кг

**Материал:** бетон, кирпич.

### Дюбель-гвоздь

Быстрый монтаж, забивается молотком.

**Применение:** направляющие профили, кабель-каналы, плинтуса.

### Для пустотелых материалов

**Дюбель-бабочка** — раскрывается за гипсокартоном, выдерживает до 15 кг.

### Для газобетона

Специальные дюбели с крупной резьбой. Обычные дюбели в газобетоне не держат!

## Гвозди

### Строительные

Классические гвозди для черновых работ. Размеры от 20 до 200 мм.

**Применение:** каркасные конструкции, обрешётка, временные крепления.

### Толевые

С большой плоской шляпкой для крепления рулонных материалов.

**Применение:** рубероид, толь, пароизоляция.

### Шиферные

Оцинкованные гвозди с большой шляпкой для крепления шифера.

**Применение:** волновой шифер, ондулин.

### Финишные

Маленькая шляпка, которая легко скрывается.

**Применение:** наличники, плинтуса, вагонка.

## Таблица выбора крепежа

| Задача | Крепёж |
|--------|--------|
| Полка на бетон | Дюбель 8×40 + саморез |
| Карниз на ГКЛ | Дюбель-бабочка |
| ГКЛ на профиль | Саморез 25 мм |
| Профнастил | Кровельный саморез |
| Вагонка | Финишный гвоздь |
| Рубероид | Толевые гвозди |
| Шифер | Шиферные гвозди |

## Частые ошибки

- Дюбель больше отверстия — не входит
- Дюбель меньше отверстия — прокручивается
- Саморез длиннее дюбеля — упирается в дно
- Обычный дюбель в газобетон — не держит

---

Весь необходимый крепёж — в **Строй Дом** в Астрахани! Саморезы, дюбели, гвозди всех видов. Консультация и доставка по городу.`
  },
  {
    slug: 'gruntovka-zachem-nuzhna',
    title: 'Грунтовка: зачем нужна и как выбрать',
    excerpt: 'Для чего нужна грунтовка и какую выбрать для разных поверхностей.',
    category: 'советы',
    tags: 'грунтовка, подготовка, ремонт, отделка',
    isPublished: true,
    relatedProductIds: ['gruntovka-ceresit-ct17', 'betonokontakt-ceresit-ct19-15kg', 'gruntovka-optimist-glubokogo-proniknoveniya', 'gruntovka-knauf-tifengrund', 'gruntovka-lakra-interernaya'],
    content: `# Грунтовка: зачем нужна и как выбрать

Грунтование — этап, который многие пропускают, считая необязательным. Однако правильная грунтовка экономит материалы и обеспечивает качественный результат.

## Зачем нужна грунтовка

**Укрепление поверхности**
- Связывает пылевидные частицы
- Предотвращает осыпание
- Укрепляет рыхлые основания

**Снижение расхода материалов**
- Выравнивает впитывающую способность
- Экономит краску, клей, штукатурку
- Экономия до 30% материалов

**Улучшение адгезии**
- Создаёт связующий слой
- Повышает сцепление с основанием
- Предотвращает отслаивание

**Защита от влаги и грибка**
- Закрывает поры материала
- Антисептические добавки
- Гидрофобизация поверхности

## Виды грунтовок

### Глубокого проникновения

**Назначение:** пористые, рыхлые основания
**Глубина проникновения:** 5-15 мм

**Применение:**
- Газобетон, пенобетон
- Старая штукатурка
- Гипсовые поверхности

### Бетоноконтакт

**Назначение:** гладкие, невпитывающие поверхности
**Состав:** акрил + кварцевый песок

**Применение:**
- Бетонные потолки
- Плитка (под штукатурку)
- Масляная краска (под шпаклёвку)

### Универсальная

**Назначение:** большинство оснований
**Состав:** акриловая дисперсия

**Применение:**
- Кирпич, бетон
- Штукатурка, шпаклёвка
- Гипсокартон

### Адгезионная

**Назначение:** максимальное сцепление

**Применение перед:**
- Плиточным клеем
- Декоративной штукатуркой
- Наливными полами

### Антисептическая

**Назначение:** защита от грибка

**Применение:**
- Ванные комнаты
- Подвалы, цокольные этажи
- После протечек

## Как выбрать грунтовку

| Поверхность | Рекомендуемая грунтовка |
|-------------|------------------------|
| Газобетон | Глубокого проникновения |
| Бетон гладкий | Бетоноконтакт |
| ГКЛ | Универсальная |
| Старая штукатурка | Глубокого проникновения |
| Перед плиткой | Адгезионная |
| Влажное помещение | Антисептическая |

## Расход грунтовки

**Примерный расход на 1 м²:**
- Глубокого проникновения: 100-200 мл
- Бетоноконтакт: 200-350 мл
- Универсальная: 100-150 мл

## Технология нанесения

**Подготовка:**
1. Удалите пыль, грязь, жирные пятна
2. Заделайте крупные трещины
3. Удалите отслаивающиеся участки

**Нанесение:**
1. Инструмент: валик, кисть, краскопульт
2. Направление: снизу вверх (стены)
3. Количество слоёв: 1-2
4. Межслойная сушка: 2-4 часа

## Важные правила

- Работайте при температуре +5...+30°C
- Наносите равномерно, без пропусков
- Избегайте потёков
- Не разбавляйте больше рекомендуемого

---

В **Строй Дом** в Астрахани — грунтовки для любых задач от проверенных производителей. Доставка по городу и области!`
  }
];

export async function POST() {
  try {
    // Удаляем старые статьи
    await db.delete(blogPosts);
    
    // Добавляем новые
    for (const post of blogPostsData) {
      await db.insert(blogPosts).values({
        slug: post.slug,
        title: post.title,
        excerpt: post.excerpt,
        content: post.content,
        category: post.category,
        tags: post.tags,
        relatedProductIds: JSON.stringify(post.relatedProductIds),
        isPublished: post.isPublished,
        publishedAt: new Date(),
      });
    }

    return NextResponse.json({ 
      success: true, 
      message: `Добавлено ${blogPostsData.length} статей` 
    });
  } catch (error) {
    console.error('Error seeding blog posts:', error);
    return NextResponse.json(
      { error: 'Failed to seed blog posts', details: String(error) },
      { status: 500 }
    );
  }
}
