# Калькулятор материалов - Настройка базы данных

## Новые таблицы

Добавлены 4 таблицы для хранения данных калькулятора:

- `calculator_categories` - Категории калькулятора (штукатурка, шпатлёвка и т.д.)
- `calculator_inputs` - Параметры ввода (площадь, толщина, слои)
- `calculator_products` - Продукты с расходом материалов
- `calculator_formulas` - Формулы расчёта для каждой категории

## Миграция базы данных

1. Убедитесь что `DATABASE_URL` установлен в `.env.local`

2. Сгенерируйте миграцию (уже сделано):
```bash
npx drizzle-kit generate
```

3. Примените миграцию:
```bash
npx drizzle-kit push
```

## Заполнение начальными данными

После применения миграции, запустите скрипт seed для заполнения калькулятора данными:

```bash
npx tsx scripts/seed-calculator.ts
```

Это создаст 9 категорий калькулятора с продуктами:
- Штукатурка
- Шпатлёвка  
- Наливной пол
- Плиточный клей
- Краска
- Гипсокартон
- Утеплитель
- Кладочная смесь
- Профнастил

## Админ-панель

После настройки БД вы можете управлять калькулятором через админку:

- `/admin/calculator` - Управление категориями
- `/admin/calculator/[id]/products` - Продукты категории
- `/admin/calculator/[id]/inputs` - Параметры ввода
- `/admin/calculator/[id]/formula` - Формула расчёта

## API

- `GET /api/calculator` - Получить все данные калькулятора
- `GET /api/admin/calculator/categories` - Список категорий (админ)
- `POST /api/admin/calculator/categories` - Создать категорию
- и т.д.

## Использование в компоненте

```tsx
// С локальными данными (по умолчанию)
<MaterialCalculator />

// С данными из базы
<MaterialCalculator useDatabase />
```
